<app-progress-bar *ngIf="loading"></app-progress-bar>
<app-page-loading *ngIf="loading"></app-page-loading>
<app-scroll-to-top></app-scroll-to-top>
<div *ngIf="!loading" class="wrapper bg-white rounded shadow">
  <div *ngIf="error">
    <h2>Không thể tìm thấy người dùng</h2>
  </div>
  <div *ngIf="!error">
    <div class="d-flex m-bottom-25 align-items-center justify-content-between">
      <div class="app-title">
        <h2>Chi tiết</h2>
      </div>
      <app-button [matMenuTriggerFor]="optionsPanel" [iconName]="'more_horiz'" [customClasses]="['app-button-option']">
      </app-button>

      <mat-menu #optionsPanel="matMenu" xPosition="before">
        <app-menu-item [iconName]="'drive_file_rename_outline'" [menuItemContent]="'Cập nhật'"
          [routerLink]="['/admin/users', 'u', user._id]"></app-menu-item>
        <mat-divider></mat-divider>
        <app-menu-item [iconName]="'delete_outline'" [menuItemContent]="'Xoá'" (click)="onDelete()"></app-menu-item>
      </mat-menu>
    </div>
    <div class="content">
      <div class="d-flex m-bottom-20">
        <div class="left">
          <span class="font-weight-bold">Tên người dùng</span>
        </div>
        <div class="right">
          <span>{{ user.name }}</span>
        </div>
      </div>

      <div class="d-flex m-bottom-20">
        <div class="left">
          <span class="font-weight-bold">Chức vụ</span>
        </div>
        <div class="right">
          <span>{{
            transformRoleName(user.role)
            }}</span>
        </div>
      </div>

      <div class="d-flex m-bottom-20" *ngIf="!!user.idManager">
        <div class="left">
          <span class="font-weight-bold">Cán bộ phụ trách</span>
        </div>
        <div class="right">
          <span *ngIf="manager$ | async as manager">{{
            manager.data.name
            }}</span>
        </div>
      </div>

      <div class="d-flex m-bottom-20">
        <div class="left">
          <span class="font-weight-bold">Email</span>
        </div>
        <div class="right">
          <span>{{
            !!user.email ? user.email : "..."
            }}</span>
        </div>
      </div>

      <div class="d-flex m-bottom-20">
        <div class="left">
          <span class="font-weight-bold">Số điện thoại</span>
        </div>
        <div class="right">
          <span>{{
            !!user.phone ? user.phone : "..."
            }}</span>
        </div>
      </div>

      <div class="d-flex m-bottom-20">
        <div class="left">
          <span class="font-weight-bold">Khu vực</span>
        </div>
        <div class="right" *ngIf="area$ | async as area">
          <span>{{ area.data.name }}</span>
          <a target="_blank" style="margin-left: 5px; color: #000" matTooltip="Bản đồ"
            [href]="'https://www.google.com/maps/place/' + area.data.name">
            <mat-icon class="material-icons-outlined app-icon">place</mat-icon>
          </a>
        </div>
      </div>

      <div class="d-flex m-bottom-20">
        <div class="left">
          <span class="font-weight-bold">Ngày tham gia</span>
        </div>
        <div class="right">
          <span>{{
            transformDate(user.createdAt)
            }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
